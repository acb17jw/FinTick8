((e,t)=>{for(var s in t)e[s]=t[s]})(window,(e=>{var t={};function s(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,s),a.l=!0,a.exports}return s.m=e,s.c=t,s.d=(e,t,r)=>{s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=(e,t)=>{if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,(t=>e[t]).bind(null,a));return r},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,"a",t),t},s.o=(e,t)=>({}.hasOwnProperty.call(e,t)),s.p="https://assets.allegrostatic.com/opbox-message-center-header/",s(s.s=0)})({0(e,t,s){e.exports=s("O14P")},O14P(e,t,s){s.r(t);const r={withCredentials:!0,headers:{Accept:"application/vnd.allegro.public.v1+json","Content-Type":"application/json"}};class a{constructor(e){const{opbox:{edge:t}}=e;this.edge=t}getThreads(){return this.edge.get("/message-center/threads?limit=10",r)}}function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},i=RegExp(Object.keys(o).join("|"),"g");class l{constructor(e,t){this._parts=e,this._subs=t}_escapeHtml(e){return e instanceof l?e:Array.isArray(e)?(null==(s="")&&(s=","),(t=e).length<=0?new l([""],[]):new l(["",...Array(t.length-1).fill(s),""],t)):(e+"").replace(i,e=>o[e]);var t,s}toString(){return this._parts.reduce((e,t,s)=>{const r=this._subs[s-1];return e+this._escapeHtml(r)+t})}inspect(){return`${this.constructor.name} '${this.toString()}'`}}function m(e,...t){return new l(e,t)}var c=s("R0yb"),u=s.n(c);const d={"pl-PL":{"log in to see your messages":[["",["Zaloguj się, aby zobaczyć swoje wiadomości."]]],"log in":[["",["Zaloguj"]]],"show all":[["",["Pokaż wszystkie"]]],"you have no message":[["",["Nie masz wiadomości"]]],"in the message center, you'll see your conversations with sellers about their offers, delivery time and product availability.":[["",["W Centrum Wiadomości zobaczysz swoje rozmowy ze sprzedawcami na temat ich ofert, czasu dostawy oraz dostępności produktów."]]],"something went wrong...":[["",["Coś poszło nie tak..."]]],"unfortunately we could not view your messages.":[["",["Niestety nie mogliśmy wyświetlić Twoich wiadomości."]]],from:[["",["od"]]],to:[["",["do"]]],"Do you have a moment?":[["",["Masz chwilę?"]]],"Help us improve the Message Center":[["",["Pomóż ulepszać Centrum Wiadomości"]]]}},_=/({{[^}]+}}|{%[^%}]+%})/g,h=/({{[^}]+}})/g,p=/({%[^%}]+%})/g,g=/({{\s*|\s*}}|{%\s*|\s*%})/g;function y(e,t=""){return e.find(e=>e[0]===t)[1]}const v=(e,t,s)=>{const r=d["pl-PL"][e];if(!r)throw Error(`Missing translation for lang "pl-PL" and key "${e}"`);return t?((e,t,s)=>{let r=y(e,t.context);return parseInt(t.count,10)>=0?r=((e,t)=>{const s=1==(r=t)?0:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?1:2;var r;return"boolean"!=typeof s?e[s]:e[s?1:0]})(r,t.count):[r]=r,((e,t,s)=>{if(s){let s=0;return e.split(_).map(r=>{if(r.match(p)){const a=t.formatters[s];if(a)return s+=1,a(r.replace(g,""));throw Error(`Missing translation formatter for "${e}"`)}return r.match(h)?t[r.replace(g,"")]:r})}const r=e.match(_);let a=0;return r?r.reduce((s,r)=>{const n=r.replace(g,"");if(r.match(p)){const o=t.formatters[a];if(o)return a+=1,s.replace(r,o(n));throw Error(`Missing translation formatter for "${e}"`)}return r.match(h)?s.replace(r,t[n]):s},e):e})(r,t,s)})(r,t,s):y(r)[0]};var f=s("vkjp"),w="mpof_vs mg9e_16 mvrt_16 mj7a_16 mh36_16 mx4z_6m mzmg_6m",b="mp0t_ji m9qz_yo munh_0 m3h2_0 mp4t_0 mqu1_1j mgn2_19 mgn2_21_s mryx_8 mgmw_ag",$="mg9e_16 mvrt_16 mj7a_16 mh36_16 mpof_ki mx7m_1 mnyp_co mlkp_ag _7d0d9_1xMMb",x="mpof_92 m7f5_5x m389_5x m7er_k4 mp7g_oh mj9z_5r";let k,z,j,C,M,q,S,O,P,L,E,T=e=>e;const A=u()(null,"pl");function N(e){const t="/login/auth?origin_url="+encodeURIComponent(e.location);return m(k||(k=T`<div class="${0}"><p class="${0}">${0}</p><a href="${0}" class="${0}" rel="nofollow" data-role="login-button" data-analytics-clickable data-analytics-click-label="loginClick">${0}</a></div>`),"mzmg_6m mg9e_24 mj7a_24 m7er_k4 mx4z_6m","_1h7wt _9hx3e mgmw_ag",v("log in to see your messages"),t,"_13q9y _8tsq7 mp4t_16 mtsp_ib _7d0d9_1kQmO",v("log in"))}class R{constructor(e,t,s,r,a){n(this,"onOpen",()=>{this.root.removeEventListener("inViewport",this.onOpen,!1),this.api.getThreads().then(this.onResponse).catch(this.onError)}),n(this,"onResponse",({data:e})=>{this.services&&this.services.get("opbox-notification-service").then(e=>e.reset("messageCenter"));const{displayMessageCenterSurvey:t}=this.parameters;0===e.threads.length?this.setContent(m(L||(L=T`<div class="${0}"><p class="${0}">${0}</p><p class="${0}" data-role="no-messages-info">${0}</p></div>`),w,b,v("you have no message"),"_1h7wt _9hx3e mgmw_ag",v("in the message center, you'll see your conversations with sellers about their offers, delivery time and product availability."))):(this.setContent((({threads:e},{messageCenterBasePath:t,displayMessageCenterSurvey:s,messageCenterSurveyLink:r})=>{const a=((e,t,s,r)=>{const a=s?(e=>m(S||(S=T`<li class="${0} ${0}"><a href="${0}" class="${0}" data-role="survey-link" data-analytics-clickable data-analytics-click-label="surveyClick" data-analytics-click-value="1"><img src="${0}" class="${0}" alt=""/><span class="${0}"><span class="${0}">${0}</span><span class="${0}">${0}</span></span></a></li>`),$,"msts_my mgmw_9u",e,x,f.a,"mjyo_6x mse2_40 meqh_en msa3_z4 isflp m0s5_9u mg9e_0 mvrt_0 mj7a_0 mh36_0 _7d0d9_3mKg0","mp7g_f6 mq1m_0 mnjl_0 mqm6_0 _7d0d9_2r8wf","_1h7wt _9hx3e mgmw_9u m9qz_yq _7d0d9_1cWh5",v("Do you have a moment?"),"_7d0d9_rVH2j mpof_z0 mp4t_0 m3h2_0 mryx_0 munh_0 meqh_en _1h7wt _1dd5x _1vx3o mgmw_9u",v("Help us improve the Message Center")))(r):"",n=e.filter(e=>null!==e.interlocutor).map((e,s)=>((e,t,s)=>{const{lastMessage:r}=e,a=r&&!r.author.isInterlocutor,n=e.lastMessage?e.lastMessage.text:m(M||(M=T`&nbsp;`));return m(q||(q=T`<li class="${0}"><a href="${0}/thread/${0}" class="${0}" data-role="show-single-button" data-analytics-clickable data-analytics-click-label="threadClick" data-analytics-click-value="click-thread-${0}">${0}<span class="${0}"><span class="${0} ${0}">${0}${0}</span><span class="${0}">${0}<span class="${0}">${0}</span></span></span></a></li>`),$,t,e.id,x,s,(e=>m(z||(z=T`<img class="${0}" src="${0}" alt="" />`),"_7d0d9_3mKg0 _7d0d9_39eFM",e.interlocutor.avatarUrl.replace("original","s128b")))(e),"mp7g_f6 mq1m_0 mnjl_0 mqm6_0 _7d0d9_2r8wf","mpof_z0 _1h7wt _9hx3e _1vx3o _7d0d9_1cWh5",!1===e.read?"m9qz_yq":"",a?m(C||(C=T`<svg class="${0}" data-role="arrow-icon"><image xlink:href="https://assets.allegrostatic.com/metrum/icon/arrow-u-turn-b66cf828ae.svg" width="100%" height="100%"/></svg>`),"mjyo_6x _7d0d9_1lGUl"):"",n,"m7f5_sf mpof_ki m7er_k4 _7d0d9_2RrhG",(e=>{let t="z";const{lastMessage:s}=e;return s&&(t=s.author.isInterlocutor?v("from"):v("to")),m(j||(j=T`<span class="${0}">${0} ${0}</span>`),"_7d0d9_rVH2j _1h7wt _1dd5x mgmw_ag mp4t_0 m3h2_0 mryx_0 munh_0 msa3_z4 _7d0d9_2T4LR mpof_z0 meqh_en",t,e.interlocutor.login)})(e),"_1h7wt _1dd5x mgmw_ag mp4t_0 m3h2_0 mryx_0 munh_0 msa3_z4",A(new Date(e.lastMessageDateTime)))})(e,t,s));return m(O||(O=T`<ul class="${0}" data-role="threads-list">${0}${0}</ul>`),"mp4t_0 m3h2_0 mryx_0 munh_0 mg9e_0 mvrt_0 mj7a_0 mh36_0",a,n.map(e=>new l([e+""],[])))})(e,t,s,r);return m(P||(P=T`<div class="${0}"><div class="${0}"><div class="${0}">${0}</div></div><div class="${0}"><a class="${0}" href="${0}" data-role="show-all-button" data-analytics-clickable data-analytics-click-label="showMoreClick">${0}</a></div></div>`),"mpof_ki myre_zn m7er_k4","mse2_k4 mp7g_oh _7d0d9_3ELUB","mp7g_f6 mq1m_0 mj7u_0 mnjl_0 mqm6_0 meqh_en _7d0d9_1hSso",a,"m7er_k4 mx7m_1 m911_co mlkp_ag mnyp_5r mdwl_5r mefy_5r","_13q9y _8hkto m7er_k4 _7d0d9_TNvmu",t,v("show all"))})(e,this.parameters)),t&&this.addMessageCenterSurveyClickEventListener())}),n(this,"onError",({status:e})=>{const t=401===e?N(this.window):m(E||(E=T`<div class="${0}"><p class="${0}">${0}</p><p class="${0}" data-role="error-info" data-analytics-enabled data-item data-analytics-view-label="inboxErrorShow">${0}</p></div>`),w,b,v("something went wrong..."),"_1h7wt _9hx3e mgmw_ag",v("unfortunately we could not view your messages."));this.setContent(t)}),n(this,"setContent",e=>{this.content.innerHTML=e}),n(this,"addMessageCenterSurveyClickEventListener",()=>{this.content.querySelector('[data-role="survey-link"]').addEventListener("click",this.onMessageCenterSurveyClick,!1)}),n(this,"onMessageCenterSurveyClick",e=>{e.preventDefault();const t=e.currentTarget.getAttribute("href");this.setMessageCenterSurveyPreferenceAndChangeLocation(t)}),n(this,"setMessageCenterSurveyPreferenceAndChangeLocation",e=>{this.window.opbox.preferences.set("displayMessageCenterSurvey",!1).then(()=>{this.window.location=e}).catch(()=>{this.window.location=e})}),this.window=e,this.services=a,this.api=t,this.root=s,this.content=s.querySelector("#mc-header-component"),this.parameters=r}initialize(){const{isAuthenticated:e}=this.parameters;e?this.root.addEventListener("inViewport",this.onOpen,!1):this.setContent(N(this.window))}}window.opbox.component.register({prototypeName:"allegro.messageCenter.header"},class{constructor({baseNode:e,props:t,services:s}){this.baseNode=e,this.props=t,this.services=s}onMount(){this.messageCenterInbox=new R(window,new a(window),this.baseNode,this.props.parameters,this.services),this.messageCenterInbox.initialize()}})},R0yb(e,t,s){var r;r=()=>(e=>{var t={};function s(r){if(t[r])return t[r].exports;var a=t[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}return s.m=e,s.c=t,s.p="",s(0)})([(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pl";return s=>""+n(Math.floor(((e||new Date)-s)/1e3),t)},Object.freeze({pl:1,en:2});var s=Object.freeze({month(e){return 1===e?"1 miesiąc temu":e>=2&&e<=4?e+" miesiące temu":e>=5&&e<=11?e+" miesięcy temu":12===e?"rok temu":"ponad rok temu"},day(e){return e+" "+(1===e?"dzień":"dni")+" temu"},hour(e){return 1===e?e+" godzinę temu":e>10&&e<22?e+" godzin temu":e%10>1&&e%10<5?e+" godziny temu":e+" godzin temu"},minute(e){return e<=0?"przed chwilą":1===e?e+" minutę temu":e>1&&e<5?e+" minuty temu":e>=10&&e<20?e+" minut temu":e%10>1&&e%10<5?e+" minuty temu":e+" minut temu"}}),r=Object.freeze({month(e){return 1===e?"1 month ago":e<12?e+" months ago":12===e?"1 year ago":"over a year ago"},day(e){return e+" "+(1===e?"day":"days")+" ago"},hour(e){return 1===e?e+" hour ago":e+" hours ago"},minute(e){return e<=0?"a moment ago":1===e?e+" minute ago":e+" minutes ago"}}),a=Object.freeze({pl:s,en:r});function n(e,t){var s=a[t];if(e>=2592e3){var r=Math.round(e/2592e3);return s.month(r)}if(e>=86400){var n=Math.floor(e/86400);return s.day(n)}if(e>=3600){var o=Math.floor(e/3600);return s.hour(o)}var i=Math.floor(e/60);return s.minute(i)}}]),e.exports=r()},vkjp(e){e.exports=JSON.parse('{"a":"https://assets.allegrostatic.com/metrum/icon/megaphone-a9d4d8d271.svg"}')}}));
//# sourceMappingURL=index.es6-pl-PL_6508a0df.js.map