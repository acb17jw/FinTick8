!function(e,t){for(var n in t)e[n]=t[n]}(window,function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://assets.allegrostatic.com/opbox-user-menu/",n(n.s=0)}({"+GN7":function(e,t){e.exports="2ac"},0:function(e,t,n){e.exports=n("O14P")},O14P:function(e,t,n){"use strict";n.r(t);var i=n("+GN7"),r=n.n(i);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function u(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}var c={set:function(e,t){var n=u(arguments[2]),i=Object.keys(n).map((function(e){var t=n[e];return!0===t?";"+e:";"+("maxAge"===e?"max-age":e)+"="+(""+t).split(";")[0]})).join("");return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+i},get:function(e){var t=document.cookie;if(!t)return e?void 0:{};var n=t.split("; ").reduce((function(e,t){var n=t.split("="),i=decodeURIComponent(n[0]),r=decodeURIComponent(n[1]);return e[i]=r,e}),{});return e?n[e]:n},remove:function(e){var t=u(arguments[1],{expires:"Thu, 01 Jan 1970 00:00:01 GMT"});return this.set(e,"",t)}},l=function(){function e(t){o(this,e),this.header=t}return s(e,[{key:"activate",value:function(){var e=this;"_ldlb7 _33b40_1XvOt".split(" ").forEach((function(t){e.header.classList.add(t)})),this.header.setAttribute("aria-selected",!0)}},{key:"deactivate",value:function(){var e=this;"_ldlb7 _33b40_1XvOt".split(" ").forEach((function(t){e.header.classList.remove(t)})),this.header.setAttribute("aria-selected",!1)}},{key:"addClickListener",value:function(e){this.header.addEventListener("click",e)}},{key:"addKeyUpListener",value:function(e){this.header.addEventListener("keyup",e)}},{key:"removeClickListener",value:function(e){this.header.removeEventListener("click",e)}},{key:"removeKeyUpListener",value:function(e){this.header.removeEventListener("keyup",e)}}]),e}(),h=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;o(this,e),this.marker=n.opbox.boxViewsMarker,this.pane=t}return s(e,[{key:"activate",value:function(){var e=this;"_152v3 _1bo4a".split(" ").forEach((function(t){e.pane.classList.add(t)})),this.marker.recursivelyMarkBoxAsVisible(this.pane)}},{key:"deactivate",value:function(){var e=this;"_152v3 _1bo4a".split(" ").forEach((function(t){e.pane.classList.remove(t)})),this.marker.recursivelyMarkBoxAsHidden(this.pane)}}]),e}(),d=function(){function e(t,n){o(this,e),this.header=new l(t),this.pane=new h(n)}return s(e,[{key:"activate",value:function(){this.header.activate(),this.pane.activate()}},{key:"deactivate",value:function(){this.header.deactivate(),this.pane.deactivate()}},{key:"addClickListener",value:function(e){this.header.addClickListener(e)}},{key:"addKeyUpListener",value:function(e){this.header.addKeyUpListener(e)}},{key:"removeClickListener",value:function(e){this.header.removeClickListener(e)}},{key:"removeKeyUpListener",value:function(e){this.header.removeKeyUpListener(e)}}]),e}(),f=function(){function e(t){o(this,e),this.tabClickListeners=[],this.tabPressListeners=[],this.tabsWrapper=t.querySelector('[data-role="user-menu-authenticated"]'),this.tabs=function(e){var t=Array.from(e.querySelectorAll('[data-role="user-menu-tab-pane"]'));return Array.from(e.querySelectorAll('[data-role="user-menu-tab-header"]'),(function(e,n){return new d(e,t[n])}))}(t)}return s(e,[{key:"initialize",value:function(){this.attachListeners()}},{key:"terminate",value:function(){this.detachListeners()}},{key:"setActivateTab",value:function(e){this.tabs.forEach((function(t,n){n===e?t.activate():t.deactivate()}))}},{key:"onTabClick",value:function(e){this.setActivateTab(e)}},{key:"onTabPress",value:function(e,t){"ENTER"===t.key.toUpperCase()&&this.setActivateTab(e)}},{key:"attachListeners",value:function(){var e=this;this.tabs.forEach((function(t,n){var i=e.onTabClick.bind(e,n),r=e.onTabPress.bind(e,n);e.tabClickListeners.push(i),e.tabPressListeners.push(r),t.addClickListener(i),t.addKeyUpListener(r)}))}},{key:"detachListeners",value:function(){var e=this;this.tabs.forEach((function(t,n){t.removeClickListener(e.tabClickListeners[n]),t.removeKeyUpListener(e.tabPressListeners[n])}))}}]),e}(),v=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,i=n.location;o(this,e),this.location=i,this.authButtons=t.querySelectorAll('[data-role="auth-button"]')}return s(e,[{key:"changeOriginUrlParam",value:function(){var e=this.location,t=e.pathname,n=void 0===t?"":t,i=e.search,r=void 0===i?"":i;r.match(/origin_url/)||this.authButtons.forEach((function(e){var t="?origin_url=".concat(encodeURIComponent("".concat(n).concat(r)));e.setAttribute("href","".concat(e.href).concat(t))}))}},{key:"initialize",value:function(){this.changeOriginUrlParam()}}]),e}();function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(){function e(t){var n=this,i=t.baseNode,r=t.props,a=t.services;o(this,e),p(this,"getNotificationService",(function(){return n.services.get("opbox-notification-service")})),p(this,"updateNotificationNodes",(function(e){n.notificationNodes.forEach((function(t){var n,i=e[t.dataset.notificationTag];t.textContent=(n=i)<1?"":n>99?"99+":n}))})),p(this,"handleOnResetTriggerClick",(function(e){var t=e.currentTarget.querySelector("[data-notification-tag]").dataset.notificationTag;n.getNotificationService().then((function(e){e.reset(t)}))})),this.props=r,this.services=a,this.notificationNodes=i.querySelectorAll("[data-notification-tag]"),this.resetTriggerNodes=i.querySelectorAll("[data-notification-reset-trigger]")}return s(e,[{key:"initialize",value:function(){var e=this;!this.props.isAnonymised&&this.props.isAuthenticated&&(this.getNotificationService().then((function(t){t.getNotifications(e.updateNotificationNodes)})),this.resetTriggerNodes.forEach((function(t){t.addEventListener("click",e.handleOnResetTriggerClick)})))}},{key:"terminate",value:function(){var e=this;this.resetTriggerNodes.forEach((function(t){t.removeEventListener("click",e.handleOnResetTriggerClick)}))}}]),e}(),y=function(){function e(t){var n=this;o(this,e),p(this,"clickHandler",(function(e){e.preventDefault();var t=e.currentTarget.hash,i=void 0===t?"":t,r=n.window.location,o=r.pathname,a=r.search,s=r.hash;n.window.history.pushState({previousHash:s},n.window.document.title,"".concat(o).concat(a).concat(i)),n.window.dispatchEvent(new HashChangeEvent("hashchange"))})),this.node=t.querySelector('[data-role="user-menu-user-inbox"]'),this.window=window}return s(e,[{key:"attachListener",value:function(){this.node&&this.node.addEventListener("click",this.clickHandler)}},{key:"removeListener",value:function(){this.node&&this.node.removeEventListener("click",this.clickHandler)}}]),e}();function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function k(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return b(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,void 0):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var g={withCredentials:!0,headers:{Accept:"application/vnd.allegro.internal.v1+json"}},L=function(e){return function(t){return t.name===e}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userAttributesGroups,n=void 0===t?[]:t,i=n.find(L("user"))||{},r=i.attributes,o=void 0===r?[]:r,a=o.find(L("firstName"))||{},s=o.find(L("login"))||{},u=o.find(L("email"))||{},c=o.find(L("type"))||{},l="Company"===c.value;return{displayName:l?s.value:a.value||s.value,login:l?"":s.value,email:u.value}},A=function(){function e(t){var n=t.baseNode,i=t.props,r=t.services,a=t.targetWindow,s=void 0===a?window:a;o(this,e),this.targetWindow=s,this.baseNode=n,this.services=r,this.props=i,this.userInboxLink=new y(n)}return s(e,[{key:"mountTabs",value:function(){this.tabs=new f(this.baseNode),this.tabs.initialize()}},{key:"mountNotificationHandlder",value:function(){this.notificationsHandler=new m({baseNode:this.baseNode,services:this.services,props:this.props}),this.notificationsHandler.initialize()}},{key:"mountAnonymised",value:function(){var e,t,n=this;this.isUserPresentInCookie=!!(e=c,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"qeppo_login2",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.console,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.opbox.reportError,r=e.get(t);if(r)try{return JSON.parse(r)}catch(e){n.error(e),i&&i.noticeError(e)}})(),this.isUserPresentInCookie&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return e.opbox.edge.get("/user-attributes",g).then((function(e){return e.data})).then(w)}().then((t=this.baseNode,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.displayName,i=void 0===n?"":n,r=e.login,o=void 0===r?"":r,a=e.email,s=void 0===a?"":a,u=t.querySelector('[data-role="user-menu-user-name"]');u&&(u.textContent=i);var c=t.querySelector('[data-role="user-menu-user-login"]');c&&(c.textContent="(".concat(o,")"));var l=t.querySelector('[data-role="user-menu-user-email"]');l&&(l.textContent=s)})).then(function(e){return function(){var t=e.querySelector('[data-role="user-menu-authenticated"]'),n=e.querySelector('[data-role="user-menu-unauthenticated"]');if(t&&n){var i,r,o="mpof_5r".split(" ");(i=n.classList).add.apply(i,k(o)),(r=t.classList).remove.apply(r,k(o))}}}(this.baseNode)).then((function(){return n.mountAuthenticated()}))}},{key:"unmountAnonymised",value:function(){this.isUserPresentInCookie&&this.unmountAuthenticated()}},{key:"mountAuthenticated",value:function(){this.mountTabs(),this.mountNotificationHandlder(),this.userInboxLink.attachListener()}},{key:"unmountAuthenticated",value:function(){this.userInboxLink.removeListener(),this.notificationsHandler.terminate(),this.tabs.terminate()}},{key:"mountUnauthenticated",value:function(){new v(this.baseNode).initialize()}},{key:"onMount",value:function(){return this.props.isAnonymised?this.mountAnonymised():this.props.isAuthenticated?this.mountAuthenticated():this.mountUnauthenticated()}},{key:"onUnmount",value:function(){this.props.isAnonymised?this.unmountAnonymised():this.props.isAuthenticated&&this.unmountAuthenticated()}}]),e}();window.opbox.component.register({prototypeName:"allegro.user.menu",clientImplementationVersion:r.a},A)}}));
//# sourceMappingURL=index-pl-PL_ebc99e40.js.map